\chapter{Source code}
\label{chap:sourcecode}

The source code used to produce the figures of this report is hosted at \url{https://github.com/Klafyvel/Hybrid-Chiral-Lasers}. This appendix describes the different files present.

\paragraph{Utilitaries}

\begin{description}
	\item[ellipse.m] Calculate the points belonging to an ellipse given the parameters $\epsilon$, the rotation $\theta$, the position $(x_0, y_0)$, the semi-major axis $a$ and a number of points $n$.
	\item[find\_max.m] Find the local maxima of a 2D array. The local maxima must be a maximum in a rectangle of size \verb|radx|$\times$\verb|rady|.
	\item[find\_modes.m] Find the output modes corresponding to the cavities at \verb|row,col|. Outputs \verb|R, theta, epsilon, lcp, modes|, the radius, rotation, parameter, a boolean which is \verb|true| for left-handed polarisations and the corresponding electrical field.
	\item[partial\_inverse.m] Calculate the partial inverse of a $4\times4$ matrix.
	\item[plot\_ellipse.m] Plot the output polarisation ellipses.
	\item[rotation.m] Calculate a rotation matrix.
	\item[savefig.m] Smartly save a figure, without overriding older plots.
	\item[reflection\_cwt.m] Calculate the reflection matrix associated with a transfer matrix in circular basis.
	\item[reflection\_oseen.m] Calculate the reflection matrix associated with a matrix in electro-magnetic basis, given the refractive indices of surrounding media.
	\item[transmission\_cwt.m] Calculate the transmission matrix associated with a transfer matrix in circular basis.
	\item[transmission\_oseen.m] Calculate the transmission matrix associated with a matrix in electro-magnetic basis, given the refractive indices of surrounding media.
\end{description}

\paragraph{Transfer matrices}

\begin{description}
	\item[oseen.m] Transfer matrix for the Oseen method, given $p, \epsilon_a, \epsilon_b, \psi, L, k_0$ in electromagnetic basis.
	\item[cwt.m] Transfer matrix for coupled-waves theory given $p, \epsilon_a, \epsilon_b, \psi, L, k_0$ and \verb|lhm| the handedness.
	\item[cwt\_from\_reduced\_variables.m] Same as above, but given $p, \psi, L, k, \kappa, \delta k$ and \verb|lhm|.
	\item[cwt\_convenient\_variables.m] Calculate reduced parameters from parameters of \verb|cwt.m|.
	\item[cwt\_circular\_to\_emag\_basis.m] Calculate the matrix to switch from circular to electromagnetic matrix given the parameters of \verb|cwt.m|.
	\item[cwt\_circular\_to\_emag\_basis\_from\_reduced\_variables.m] Same as above but with reduced parameters.
	\item[interface\_chiral\_same\_handedness.m] Matrix for the interface between two media of same handedness.
	\item[interface\_chiral\_same\_handedness\_from\_reduced\_variables.m] Same as above, with reduced variables.
	\item[interface\_chiral\_to\_isotrope.m] Matrix for the interface between chiral media and isotropic media.
	\item[interface\_chiral\_to\_isotrope\_from\_reduced\_variables.m] Same as above, with reduced variables.
	\item[interface\_left\_to\_right.m] Matrix for the interface from a left-handed media to a right-handed one.
	\item[interface\_left\_to\_right\_from\_reduced\_variables.m] Same as above, with reduced variables.
\end{description}

\paragraph{Reflectivities}

\begin{description}
	\item[simple\_cavity\_transmission.m] Transmission coefficients for the simple cavity.
	\item[check\_energy\_conservation.m] Calculate energy conservation coefficients for the simple cavity.
	\item[narrow\_band.m] Transmission coefficients for the cavity with a defect.
\end{description}

\paragraph{Cavities}

\begin{description}
	\item[simple\_cavity.m] Reproduce the cavity described by \textcite{topf_modes_2014} using various methods.
	\item[defect\_lasing.m] Cavity with a defect.
	\item[defect\_tuning.m] Scan through the possible defect angles of the simple cavity. This code takes more than an hour to run on my computer.
	\item[hybrid\_cavity.m] Hybrid cavity.
	\item[hybrid\_defect\_cavity.m] Hybrid cavity with a defect.
	\item[hybrid\_defect\_tuning.m] Scan through the possible defect angles of the hybrid cavity. This code takes more than an hour to run on my computer.
\end{description}